FROM node:20-alpine

WORKDIR /app

COPY infra/docker/c2-router-mock/package.json ./package.json
RUN corepack enable && pnpm install --prod --no-frozen-lockfile

COPY infra/docker/c2-router-mock/server.js ./server.js
COPY infra/docker/c2-router-mock/c2.proto ./proto/c2.proto

ENV PORT=50051
EXPOSE 50051

CMD ["node", "server.js"]
